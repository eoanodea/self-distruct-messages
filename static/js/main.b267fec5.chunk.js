(this.webpackJsonpsdm=this.webpackJsonpsdm||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n.n(r),c=n(6),o=n.n(c),l=(n(12),n(2)),i=n.p+"static/media/logo.b3fb271f.gif",u=n.p+"static/media/unlocked.a97ea20a.gif",d=n.p+"static/media/loading.d428528c.gif",p=(n(13),function(e){var t=e.back,n=e.submit,r=e.loading,c=e.error,o=s.a.useState(""),i=Object(l.a)(o,2),u=i[0],d=i[1],p=s.a.useState(null),b=Object(l.a)(p,2),j=b[0],h=b[1],m=s.a.useState(""),f=Object(l.a)(m,2),O=f[0],g=f[1],x=s.a.useState(null),v=Object(l.a)(x,2),C=v[0],N=v[1],k=function(){if(""===u&&h("Message cannot be blank"),""===O&&N("Passcode cannot be blank"),O.length<6)return N("Passcode cannot be less than 6 characters");h(null),g(null),n({message:u,password:O})},y=function(e){13===e.keyCode&&k()};return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsx)("h1",{children:"Create a message"}),Object(a.jsxs)("div",{className:"form-container add-form-container",children:[Object(a.jsx)("input",{type:"text",id:"message",className:"add-form",value:u,onKeyDown:y,onChange:function(e){return d(e.target.value)},placeholder:"Message"}),j&&Object(a.jsx)("label",{htmlFor:"message",className:"error",children:j})]}),Object(a.jsxs)("div",{className:"form-container add-form-container",children:[Object(a.jsx)("input",{type:"text",id:"passcode",className:"add-form",value:O,onKeyDown:y,onChange:function(e){return g(e.target.value.toLowerCase())},placeholder:"Passcode"}),C&&Object(a.jsx)("label",{htmlFor:"passcode",className:"error",children:C})]}),c&&Object(a.jsxs)("p",{className:"error",children:["Error: ",c]}),Object(a.jsx)("button",{disabled:r,className:"erase-button",onClick:k,children:"Create"}),Object(a.jsx)("button",{disabled:r,className:"erase-button",onClick:t,children:"Cancel"})]})})}),b=n(3),j=n.n(b),h=n(4),m="https://self-destruct-message-server.herokuapp.com",f="/api/",O=function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m).concat(f,"messages/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m).concat(f,"message"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(t)});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m).concat(f,"messages/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();var v=function(){var e=s.a.useState(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=s.a.useState(""),o=Object(l.a)(c,2),b=o[0],j=o[1],h=s.a.useState(null),m=Object(l.a)(h,2),f=m[0],v=m[1],C=s.a.useState(!1),N=Object(l.a)(C,2),k=N[0],y=N[1],w=s.a.useState(null),A=Object(l.a)(w,2),S=A[0],E=A[1],P=s.a.useState(!1),T=Object(l.a)(P,2),D=T[0],M=T[1],J=function(){if(""===b)return v("Passphrase cannot be blank");y(!0),v(null),O(b).then((function(e){if(y(!1),!e||e.error)return v("Passphrase is not correct");r(!0),E(e.message.message)}))},K=function(){y(!1),M((function(e){return!e})),v(null)};return n?Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsx)("img",{src:k?d:u,className:"App-logo",alt:"logo"}),Object(a.jsx)("p",{children:"Secure Message:"}),Object(a.jsx)("p",{className:"message",children:S}),f&&Object(a.jsxs)("p",{className:"error",children:["Error: ",f]}),Object(a.jsx)("button",{disabled:k,className:"erase-button",onClick:function(){y(!0),x(b).then((function(e){if(y(!1),!e||e.error)return v("Could not destroy message");r(!1),E(null),j("")}))},children:"Destroy"}),Object(a.jsx)("button",{disabled:k,className:"erase-button",onClick:function(){y(!1),r(!1),E(null),j(""),v(null)},children:"Close"})]})}):D?Object(a.jsx)(p,{back:K,submit:function(e){y(!0),v(null),g(e).then((function(e){if(y(!1),!e||e.error)return v("Error: ".concat(e&&e.error?e.error:"Could not create message"));K()}))},loading:k,error:f}):Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsx)("img",{src:k?d:i,className:"App-logo",alt:"logo"}),Object(a.jsx)("p",{children:"Enter your passphrase to continue"}),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("input",{type:"text",id:"passcode",value:b,onKeyDown:function(e){13===e.keyCode&&J()},onChange:function(e){return j(e.target.value.toLowerCase())},placeholder:"Passphrase"}),Object(a.jsx)("button",{className:"submit-button",disabled:k,onClick:J,children:"Enter"})]}),f&&Object(a.jsxs)("p",{className:"error",children:[" ",f]}),Object(a.jsx)("button",{disabled:k,className:"erase-button",onClick:K,children:"Create a message"})]})})};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b267fec5.chunk.js.map