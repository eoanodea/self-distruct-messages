{"version":3,"sources":["logo.gif","unlocked.gif","loading.gif","Create.js","api.js","App.js","index.js"],"names":["Create","back","submit","loading","error","React","useState","message","setMessage","messageError","setMessageError","passcode","setPasscode","passcodeError","setPasscodeError","createMessage","length","password","handleKeyDown","e","keyCode","className","type","id","value","onKeyDown","onChange","v","target","placeholder","htmlFor","toLowerCase","disabled","onClick","server_url","prefix","get","a","fetch","method","headers","Accept","response","json","console","log","create","body","JSON","stringify","destroy","App","correct","setCorrect","input","setInput","setError","setLoading","creating","setCreating","then","data","toggleCreate","old","src","loadingLogo","unlocked","alt","logo","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sMAAe,MAA0B,iCCA1B,MAA0B,qCCA1B,MAA0B,oCCiF1BA,G,MA/EA,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,MAAY,EACrBC,IAAMC,SAAS,IADM,mBAC5CC,EAD4C,KACnCC,EADmC,OAEXH,IAAMC,SAAS,MAFJ,mBAE5CG,EAF4C,KAE9BC,EAF8B,OAGnBL,IAAMC,SAAS,IAHI,mBAG5CK,EAH4C,KAGlCC,EAHkC,OAITP,IAAMC,SAAS,MAJN,mBAI5CO,EAJ4C,KAI7BC,EAJ6B,KAM7CC,EAAgB,WAGpB,GAFgB,KAAZR,GAAgBG,EAAgB,2BACnB,KAAbC,GAAiBG,EAAiB,4BAClCH,EAASK,OAAS,EACpB,OAAOF,EAAiB,6CAC1BJ,EAAgB,MAChBE,EAAY,MAOZV,EALmB,CACjBK,UACAU,SAAUN,KAMRO,EAAgB,SAACC,GACH,KAAdA,EAAEC,SAAgBL,KAGxB,OACE,qBAAKM,UAAU,MAAf,SACE,yBAAQA,UAAU,aAAlB,UACE,kDACA,sBAAKA,UAAU,oCAAf,UACE,uBACEC,KAAK,OACLC,GAAG,UACHF,UAAU,WACVG,MAAOjB,EACPkB,UAAWP,EACXQ,SAAU,SAACC,GAAD,OAAOnB,EAAWmB,EAAEC,OAAOJ,QACrCK,YAAY,YAEbpB,GACC,uBAAOqB,QAAQ,UAAUT,UAAU,QAAnC,SACGZ,OAKP,sBAAKY,UAAU,oCAAf,UACE,uBACEC,KAAK,OACLC,GAAG,WACHF,UAAU,WACVG,MAAOb,EACPc,UAAWP,EACXQ,SAAU,SAACC,GAAD,OAAOf,EAAYe,EAAEC,OAAOJ,MAAMO,gBAC5CF,YAAY,aAEbhB,GACC,uBAAOiB,QAAQ,WAAWT,UAAU,QAApC,SACGR,OAINT,GAAS,oBAAGiB,UAAU,QAAb,oBAA6BjB,KACvC,wBACE4B,SAAU7B,EACVkB,UAAU,eACVY,QAASlB,EAHX,oBAOA,wBAAQiB,SAAU7B,EAASkB,UAAU,eAAeY,QAAShC,EAA7D,2B,uBCzEFiC,EAAa,qDAEbC,EAAS,QAEFC,EAAG,uCAAG,WAAOzB,GAAP,eAAA0B,EAAA,+EAEQC,MAAM,GAAD,OAAIJ,GAAJ,OAAiBC,EAAjB,oBAAmCxB,GAAY,CACzE4B,OAAQ,MACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,mBAChB,8BAA+B,OAPpB,cAETC,EAFS,yBAURA,EAASC,QAVD,yDAYRC,QAAQC,IAAR,OAZQ,yDAAH,sDAgBHC,EAAM,uCAAG,WAAOvC,GAAP,eAAA8B,EAAA,+EAEKC,MAAM,GAAD,OAAIJ,GAAJ,OAAiBC,EAAjB,WAAkC,CAC5DI,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,mBAChB,8BAA+B,KAEjCM,KAAMC,KAAKC,UAAU1C,KATL,cAEZmC,EAFY,yBAWXA,EAASC,QAXE,yDAaXC,QAAQC,IAAR,OAbW,yDAAH,sDAiBNK,EAAO,uCAAG,WAAOvC,GAAP,eAAA0B,EAAA,+EAEIC,MAAM,GAAD,OAAIJ,GAAJ,OAAiBC,EAAjB,oBAAmCxB,GAAY,CACzE4B,OAAQ,SACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,mBAChB,8BAA+B,OAPhB,cAEbC,EAFa,yBAUZA,EAASC,QAVG,yDAYZC,QAAQC,IAAR,OAZY,yDAAH,sDCyILM,MApKf,WAAgB,IAAD,EACiB9C,IAAMC,UAAS,GADhC,mBACN8C,EADM,KACGC,EADH,OAEahD,IAAMC,SAAS,IAF5B,mBAENgD,EAFM,KAECC,EAFD,OAGalD,IAAMC,SAAS,MAH5B,mBAGNF,EAHM,KAGCoD,EAHD,OAIiBnD,IAAMC,UAAS,GAJhC,mBAINH,EAJM,KAIGsD,EAJH,OAKiBpD,IAAMC,SAAS,MALhC,mBAKNC,EALM,KAKGC,EALH,OAMmBH,IAAMC,UAAS,GANlC,mBAMNoD,EANM,KAMIC,EANJ,KAQPzD,EAAS,WACb,GAAc,KAAVoD,EAAc,OAAOE,EAAS,8BAClCC,GAAW,GACXD,EAAS,MACTpB,EAAIkB,GAAOM,MAAK,SAACC,GAGf,GAFAJ,GAAW,IAENI,GAAQA,EAAKzD,MAAO,OAAOoD,EAAS,6BACzCH,GAAW,GAEX7C,EAAWqD,EAAKtD,QAAQA,aA6BtBuD,EAAe,WACnBL,GAAW,GACXE,GAAY,SAACI,GAAD,OAAUA,KACtBP,EAAS,OAqBX,OAAIJ,EAEA,qBAAK/B,UAAU,MAAf,SACE,yBAAQA,UAAU,aAAlB,UASE,qBACE2C,IAAK7D,EAAU8D,EAAcC,EAC7B7C,UAAU,WACV8C,IAAI,SAiBN,gDACA,mBAAG9C,UAAU,UAAb,SAAwBd,IAEvBH,GAAS,oBAAGiB,UAAU,QAAb,oBAA6BjB,KAEvC,wBAAQ4B,SAAU7B,EAASkB,UAAU,eAAeY,QAtF9C,WACZwB,GAAW,GAEXP,EAAQI,GAAOM,MAAK,SAACC,GAGnB,GAFAJ,GAAW,IAENI,GAAQA,EAAKzD,MAAO,OAAOoD,EAAS,6BACzCH,GAAW,GACX7C,EAAW,MACX+C,EAAS,QA6EL,qBAIA,wBAAQvB,SAAU7B,EAASkB,UAAU,eAAeY,QA7E9C,WACZwB,GAAW,GACXJ,GAAW,GACX7C,EAAW,MACX+C,EAAS,IACTC,EAAS,OAwEH,wBAOJE,EAEA,cAAC,EAAD,CACEzD,KAAM6D,EACN5D,OAtEgB,SAACK,GAErBkD,GAAW,GACXD,EAAS,MACTV,EAAOvC,GAASqD,MAAK,SAACC,GAGpB,GAFAJ,GAAW,IAENI,GAAQA,EAAKzD,MAChB,OAAOoD,EAAS,UAAD,OAEXK,GAAQA,EAAKzD,MAAQyD,EAAKzD,MAAQ,6BAIxC0D,QAyDE3D,QAASA,EACTC,MAAOA,IAIX,qBAAKiB,UAAU,MAAf,SACE,yBAAQA,UAAU,aAAlB,UACE,qBACE2C,IAAK7D,EAAU8D,EAAcG,EAC7B/C,UAAU,WACV8C,IAAI,SAEN,kEACA,sBAAK9C,UAAU,iBAAf,UACE,uBACEC,KAAK,OACLC,GAAG,WACHC,MAAO8B,EACP7B,UAnGY,SAACN,GACH,KAAdA,EAAEC,SAAgBlB,KAmGdwB,SAAU,SAACC,GAAD,OAAO4B,EAAS5B,EAAEC,OAAOJ,MAAMO,gBACzCF,YAAY,eAGd,wBAAQR,UAAU,gBAAgBW,SAAU7B,EAAS8B,QAAS/B,EAA9D,sBAIDE,GAAS,oBAAGiB,UAAU,QAAb,cAAuBjB,KACjC,wBACE4B,SAAU7B,EACVkB,UAAU,eACVY,QAAS6B,EAHX,oCC7JRO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.b267fec5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.b3fb271f.gif\";","export default __webpack_public_path__ + \"static/media/unlocked.a97ea20a.gif\";","export default __webpack_public_path__ + \"static/media/loading.d428528c.gif\";","import React from \"react\";\n\nconst Create = ({ back, submit, loading, error }) => {\n  const [message, setMessage] = React.useState(\"\");\n  const [messageError, setMessageError] = React.useState(null);\n  const [passcode, setPasscode] = React.useState(\"\");\n  const [passcodeError, setPasscodeError] = React.useState(null);\n\n  const createMessage = () => {\n    if (message === \"\") setMessageError(\"Message cannot be blank\");\n    if (passcode === \"\") setPasscodeError(\"Passcode cannot be blank\");\n    if (passcode.length < 6)\n      return setPasscodeError(\"Passcode cannot be less than 6 characters\");\n    setMessageError(null);\n    setPasscode(null);\n\n    const newMessage = {\n      message,\n      password: passcode,\n    };\n\n    submit(newMessage);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 13) createMessage();\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>Create a message</h1>\n        <div className=\"form-container add-form-container\">\n          <input\n            type=\"text\"\n            id=\"message\"\n            className=\"add-form\"\n            value={message}\n            onKeyDown={handleKeyDown}\n            onChange={(v) => setMessage(v.target.value)}\n            placeholder=\"Message\"\n          />\n          {messageError && (\n            <label htmlFor=\"message\" className=\"error\">\n              {messageError}\n            </label>\n          )}\n        </div>\n\n        <div className=\"form-container add-form-container\">\n          <input\n            type=\"text\"\n            id=\"passcode\"\n            className=\"add-form\"\n            value={passcode}\n            onKeyDown={handleKeyDown}\n            onChange={(v) => setPasscode(v.target.value.toLowerCase())}\n            placeholder=\"Passcode\"\n          />\n          {passcodeError && (\n            <label htmlFor=\"passcode\" className=\"error\">\n              {passcodeError}\n            </label>\n          )}\n        </div>\n        {error && <p className=\"error\">Error: {error}</p>}\n        <button\n          disabled={loading}\n          className=\"erase-button\"\n          onClick={createMessage}\n        >\n          Create\n        </button>\n        <button disabled={loading} className=\"erase-button\" onClick={back}>\n          Cancel\n        </button>\n      </header>\n    </div>\n  );\n};\n\nexport default Create;\n","const server_url = \"https://self-destruct-message-server.herokuapp.com\";\n\nconst prefix = \"/api/\";\n\nexport const get = async (passcode) => {\n  try {\n    const response = await fetch(`${server_url}${prefix}messages/${passcode}`, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    });\n    return response.json();\n  } catch (err) {\n    return console.log(err);\n  }\n};\n\nexport const create = async (message) => {\n  try {\n    const response = await fetch(`${server_url}${prefix}message`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n      body: JSON.stringify(message),\n    });\n    return response.json();\n  } catch (err) {\n    return console.log(err);\n  }\n};\n\nexport const destroy = async (passcode) => {\n  try {\n    const response = await fetch(`${server_url}${prefix}messages/${passcode}`, {\n      method: \"DELETE\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    });\n    return response.json();\n  } catch (err) {\n    return console.log(err);\n  }\n};\n","import React from \"react\";\nimport logo from \"./logo.gif\";\nimport unlocked from \"./unlocked.gif\";\n\nimport loadingLogo from \"./loading.gif\";\nimport \"./App.css\";\nimport Create from \"./Create\";\nimport { create, destroy, get } from \"./api\";\n// import { Player } from \"@lottiefiles/react-lottie-player\";\n\nfunction App() {\n  const [correct, setCorrect] = React.useState(false);\n  const [input, setInput] = React.useState(\"\");\n  const [error, setError] = React.useState(null);\n  const [loading, setLoading] = React.useState(false);\n  const [message, setMessage] = React.useState(null);\n  const [creating, setCreating] = React.useState(false);\n\n  const submit = () => {\n    if (input === \"\") return setError(\"Passphrase cannot be blank\");\n    setLoading(true);\n    setError(null);\n    get(input).then((data) => {\n      setLoading(false);\n\n      if (!data || data.error) return setError(\"Passphrase is not correct\");\n      setCorrect(true);\n\n      setMessage(data.message.message);\n    });\n  };\n\n  const erase = () => {\n    setLoading(true);\n\n    destroy(input).then((data) => {\n      setLoading(false);\n\n      if (!data || data.error) return setError(\"Could not destroy message\");\n      setCorrect(false);\n      setMessage(null);\n      setInput(\"\");\n    });\n  };\n\n  const close = () => {\n    setLoading(false);\n    setCorrect(false);\n    setMessage(null);\n    setInput(\"\");\n    setError(null);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 13) submit();\n  };\n\n  const toggleCreate = () => {\n    setLoading(false);\n    setCreating((old) => !old);\n    setError(null);\n  };\n\n  const createMessage = (message) => {\n    // if (input === \"\") return setError(\"Passphrase cannot be blank\");\n    setLoading(true);\n    setError(null);\n    create(message).then((data) => {\n      setLoading(false);\n\n      if (!data || data.error)\n        return setError(\n          `Error: ${\n            data && data.error ? data.error : \"Could not create message\"\n          }`\n        );\n\n      toggleCreate();\n    });\n  };\n\n  if (correct)\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          {/* <Player\n            src=\"https://assets3.lottiefiles.com/packages/lf20_yAh844.json\"\n            // src={unlocked}\n            style={{ height: \"300px\", width: \"300px\" }}\n            // className=\"App-logo\"\n\n            alt=\"logo\"\n          /> */}\n          <img\n            src={loading ? loadingLogo : unlocked}\n            className=\"App-logo\"\n            alt=\"logo\"\n          />\n          {/* <Player\n            src={\"https://assets3.lottiefiles.com/packages/lf20_yAh844.json\"}\n            background=\"transparent\"\n            speed=\"1\"\n            style={{ height: \"300px\", width: \"300px\" }}\n          /> */}\n          {/* <script src=\"https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js\"></script>\n          <lottie-player\n            src=\"https://assets3.lottiefiles.com/packages/lf20_yAh844.json\"\n            background=\"transparent\"\n            speed=\"1\"\n            style={{ height: \"300px\", width: \"300px\" }}\n            autoplay\n          ></lottie-player> */}\n\n          <p>Secure Message:</p>\n          <p className=\"message\">{message}</p>\n\n          {error && <p className=\"error\">Error: {error}</p>}\n\n          <button disabled={loading} className=\"erase-button\" onClick={erase}>\n            Destroy\n          </button>\n\n          <button disabled={loading} className=\"erase-button\" onClick={close}>\n            Close\n          </button>\n        </header>\n      </div>\n    );\n\n  if (creating)\n    return (\n      <Create\n        back={toggleCreate}\n        submit={createMessage}\n        loading={loading}\n        error={error}\n      />\n    );\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img\n          src={loading ? loadingLogo : logo}\n          className=\"App-logo\"\n          alt=\"logo\"\n        />\n        <p>Enter your passphrase to continue</p>\n        <div className=\"form-container\">\n          <input\n            type=\"text\"\n            id=\"passcode\"\n            value={input}\n            onKeyDown={handleKeyDown}\n            onChange={(v) => setInput(v.target.value.toLowerCase())}\n            placeholder=\"Passphrase\"\n          />\n\n          <button className=\"submit-button\" disabled={loading} onClick={submit}>\n            Enter\n          </button>\n        </div>\n        {error && <p className=\"error\"> {error}</p>}\n        <button\n          disabled={loading}\n          className=\"erase-button\"\n          onClick={toggleCreate}\n        >\n          Create a message\n        </button>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}