{"version":3,"sources":["logo.gif","unlocked.gif","loading.gif","api.js","App.js","index.js"],"names":["server_url","prefix","get","passcode","a","fetch","method","headers","Accept","response","json","console","log","destroy","App","React","useState","correct","setCorrect","input","setInput","error","setError","loading","setLoading","message","setMessage","submit","then","data","className","src","loadingLogo","unlocked","alt","disabled","onClick","logo","type","id","value","onKeyDown","e","keyCode","onChange","v","target","toLowerCase","placeholder","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sMAAe,MAA0B,iCCA1B,MAA0B,qCCA1B,MAA0B,oC,+BCAnCA,EAAa,qDAEbC,EAAS,QAEFC,EAAG,uCAAG,WAAOC,GAAP,eAAAC,EAAA,+EAEQC,MAAM,GAAD,OAAIL,GAAJ,OAAiBC,EAAjB,oBAAmCE,GAAY,CACzEG,OAAQ,MACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,mBAChB,8BAA+B,OAPpB,cAETC,EAFS,yBAURA,EAASC,QAVD,yDAYRC,QAAQC,IAAR,OAZQ,yDAAH,sDAgBHC,EAAO,uCAAG,WAAOV,GAAP,eAAAC,EAAA,+EAEIC,MAAM,GAAD,OAAIL,GAAJ,OAAiBC,EAAjB,oBAAmCE,GAAY,CACzEG,OAAQ,SACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,mBAChB,8BAA+B,OAPhB,cAEbC,EAFa,yBAUZA,EAASC,QAVG,yDAYZC,QAAQC,IAAR,OAZY,yDAAH,sDCwFLE,MArGf,WAAgB,IAAD,EACiBC,IAAMC,UAAS,GADhC,mBACNC,EADM,KACGC,EADH,OAEaH,IAAMC,SAAS,IAF5B,mBAENG,EAFM,KAECC,EAFD,OAGaL,IAAMC,SAAS,MAH5B,mBAGNK,EAHM,KAGCC,EAHD,OAIiBP,IAAMC,UAAS,GAJhC,mBAINO,EAJM,KAIGC,EAJH,OAMiBT,IAAMC,SAAS,MANhC,mBAMNS,EANM,KAMGC,EANH,KAQPC,EAAS,WACb,GAAc,KAAVR,EAAc,OAAOG,EAAS,8BAClCE,GAAW,GACXF,EAAS,MACTpB,EAAIiB,GAAOS,MAAK,SAACC,GAGf,GAFAL,GAAW,IAENK,GAAQA,EAAKR,MAAO,OAAOC,EAAS,6BACzCJ,GAAW,GAEXQ,EAAWG,EAAKJ,QAAQA,aA6B5B,OAAIR,EAEA,qBAAKa,UAAU,MAAf,SACE,yBAAQA,UAAU,aAAlB,UACE,qBACEC,IAAKR,EAAUS,EAAcC,EAC7BH,UAAU,WACVI,IAAI,SAGN,gDACA,mBAAGJ,UAAU,UAAb,SAAwBL,IAEvBJ,GAAS,oBAAGS,UAAU,QAAb,oBAA6BT,KAEvC,wBAAQc,SAAUZ,EAASO,UAAU,eAAeM,QAxC9C,WACZZ,GAAW,GAEXX,EAAQM,GAAOS,MAAK,SAACC,GAGnB,GAFAL,GAAW,IAENK,GAAQA,EAAKR,MAAO,OAAOC,EAAS,6BACzCJ,GAAW,GACXQ,EAAW,MACXN,EAAS,QA+BL,qBAIA,wBAAQe,SAAUZ,EAASO,UAAU,eAAeM,QA/B9C,WACZZ,GAAW,GACXN,GAAW,GACXQ,EAAW,MACXN,EAAS,IACTE,EAAS,OA0BH,wBAON,qBAAKQ,UAAU,MAAf,SACE,yBAAQA,UAAU,aAAlB,UACE,qBACEC,IAAKR,EAAUS,EAAcK,EAC7BP,UAAU,WACVI,IAAI,SAEN,kEACA,sBAAKJ,UAAU,iBAAf,UACE,uBACEQ,KAAK,OACLC,GAAG,WACHC,MAAOrB,EACPsB,UA3CY,SAACC,GACH,KAAdA,EAAEC,SAAgBhB,KA2CdiB,SAAU,SAACC,GAAD,OAAOzB,EAASyB,EAAEC,OAAON,MAAMO,gBACzCC,YAAY,eAGd,wBAAQlB,UAAU,gBAAgBK,SAAUZ,EAASa,QAAST,EAA9D,sBAIDN,GAAS,oBAAGS,UAAU,QAAb,cAAuBT,WCjGzC4B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.c14b9f72.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.b3fb271f.gif\";","export default __webpack_public_path__ + \"static/media/unlocked.a97ea20a.gif\";","export default __webpack_public_path__ + \"static/media/loading.d428528c.gif\";","const server_url = \"https://self-destruct-message-server.herokuapp.com\";\n\nconst prefix = \"/api/\";\n\nexport const get = async (passcode) => {\n  try {\n    const response = await fetch(`${server_url}${prefix}messages/${passcode}`, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    });\n    return response.json();\n  } catch (err) {\n    return console.log(err);\n  }\n};\n\nexport const destroy = async (passcode) => {\n  try {\n    const response = await fetch(`${server_url}${prefix}messages/${passcode}`, {\n      method: \"DELETE\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    });\n    return response.json();\n  } catch (err) {\n    return console.log(err);\n  }\n};\n","import React from \"react\";\nimport logo from \"./logo.gif\";\nimport unlocked from \"./unlocked.gif\";\nimport loadingLogo from \"./loading.gif\";\nimport \"./App.css\";\nimport { destroy, get } from \"./api\";\n\nfunction App() {\n  const [correct, setCorrect] = React.useState(false);\n  const [input, setInput] = React.useState(\"\");\n  const [error, setError] = React.useState(null);\n  const [loading, setLoading] = React.useState(false);\n\n  const [message, setMessage] = React.useState(null);\n\n  const submit = () => {\n    if (input === \"\") return setError(\"Passphrase cannot be blank\");\n    setLoading(true);\n    setError(null);\n    get(input).then((data) => {\n      setLoading(false);\n\n      if (!data || data.error) return setError(\"Passphrase is not correct\");\n      setCorrect(true);\n\n      setMessage(data.message.message);\n    });\n  };\n\n  const erase = () => {\n    setLoading(true);\n\n    destroy(input).then((data) => {\n      setLoading(false);\n\n      if (!data || data.error) return setError(\"Could not destroy message\");\n      setCorrect(false);\n      setMessage(null);\n      setInput(\"\");\n    });\n  };\n\n  const close = () => {\n    setLoading(false);\n    setCorrect(false);\n    setMessage(null);\n    setInput(\"\");\n    setError(null);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 13) submit();\n  };\n\n  if (correct)\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img\n            src={loading ? loadingLogo : unlocked}\n            className=\"App-logo\"\n            alt=\"logo\"\n          />\n\n          <p>Secure Message:</p>\n          <p className=\"message\">{message}</p>\n\n          {error && <p className=\"error\">Error: {error}</p>}\n\n          <button disabled={loading} className=\"erase-button\" onClick={erase}>\n            Destroy\n          </button>\n\n          <button disabled={loading} className=\"erase-button\" onClick={close}>\n            Close\n          </button>\n        </header>\n      </div>\n    );\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img\n          src={loading ? loadingLogo : logo}\n          className=\"App-logo\"\n          alt=\"logo\"\n        />\n        <p>Enter your passphrase to continue</p>\n        <div className=\"form-container\">\n          <input\n            type=\"text\"\n            id=\"passcode\"\n            value={input}\n            onKeyDown={handleKeyDown}\n            onChange={(v) => setInput(v.target.value.toLowerCase())}\n            placeholder=\"Passphrase\"\n          />\n\n          <button className=\"submit-button\" disabled={loading} onClick={submit}>\n            Enter\n          </button>\n        </div>\n        {error && <p className=\"error\"> {error}</p>}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}